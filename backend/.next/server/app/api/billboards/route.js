/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/billboards/route";
exports.ids = ["app/api/billboards/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbillboards%2Froute&page=%2Fapi%2Fbillboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbillboards%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Coutdoors-new-website%5Cbackend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Coutdoors-new-website%5Cbackend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbillboards%2Froute&page=%2Fapi%2Fbillboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbillboards%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Coutdoors-new-website%5Cbackend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Coutdoors-new-website%5Cbackend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_HP_Desktop_outdoors_new_website_backend_app_api_billboards_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/billboards/route.ts */ \"(rsc)/./app/api/billboards/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/billboards/route\",\n        pathname: \"/api/billboards\",\n        filename: \"route\",\n        bundlePath: \"app/api/billboards/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\HP\\\\Desktop\\\\outdoors-new-website\\\\backend\\\\app\\\\api\\\\billboards\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_HP_Desktop_outdoors_new_website_backend_app_api_billboards_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/billboards/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZiaWxsYm9hcmRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZiaWxsYm9hcmRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYmlsbGJvYXJkcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIUCU1Q0Rlc2t0b3AlNUNvdXRkb29ycy1uZXctd2Vic2l0ZSU1Q2JhY2tlbmQlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0hQJTVDRGVza3RvcCU1Q291dGRvb3JzLW5ldy13ZWJzaXRlJTVDYmFja2VuZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDcUM7QUFDbEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vdXRkb29ycy1uZXh0anMtYXBpLz81MjZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXEhQXFxcXERlc2t0b3BcXFxcb3V0ZG9vcnMtbmV3LXdlYnNpdGVcXFxcYmFja2VuZFxcXFxhcHBcXFxcYXBpXFxcXGJpbGxib2FyZHNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2JpbGxib2FyZHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9iaWxsYm9hcmRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9iaWxsYm9hcmRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcSFBcXFxcRGVza3RvcFxcXFxvdXRkb29ycy1uZXctd2Vic2l0ZVxcXFxiYWNrZW5kXFxcXGFwcFxcXFxhcGlcXFxcYmlsbGJvYXJkc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYmlsbGJvYXJkcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbillboards%2Froute&page=%2Fapi%2Fbillboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbillboards%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Coutdoors-new-website%5Cbackend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Coutdoors-new-website%5Cbackend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/billboards/route.ts":
/*!*************************************!*\
  !*** ./app/api/billboards/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_cors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/cors */ \"(rsc)/./lib/cors.ts\");\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\n\n\n\nfunction toJsonSafe(data) {\n    return JSON.parse(JSON.stringify(data, (_k, v)=>typeof v === \"bigint\" ? v.toString() : v));\n}\nfunction ok(req, data, status = 200) {\n    return (0,_lib_cors__WEBPACK_IMPORTED_MODULE_2__.withCors)(req, next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(toJsonSafe(data), {\n        status\n    }));\n}\nfunction fail(req, message, status = 500) {\n    return (0,_lib_cors__WEBPACK_IMPORTED_MODULE_2__.withCors)(req, next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: message\n    }, {\n        status\n    }));\n}\n// Handle preflight\nasync function OPTIONS(req) {\n    return (0,_lib_cors__WEBPACK_IMPORTED_MODULE_2__.withCors)(req, new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 204\n    }));\n}\n/**\r\n * GET /api/billboards\r\n * Returns all products (billboards) with their categories, images, and location data\r\n */ async function GET(req) {\n    try {\n        const url = new URL(req.url);\n        const id = url.searchParams.get(\"id\");\n        const category_id = url.searchParams.get(\"category_id\");\n        const state = url.searchParams.get(\"state\");\n        const limit = Math.min(Number(url.searchParams.get(\"limit\") || 100), 500);\n        const offset = Math.max(Number(url.searchParams.get(\"offset\") || 0), 0);\n        // Get single billboard by ID\n        if (id) {\n            const query = `\r\n        SELECT\r\n          p.*,\r\n          c.name as category_name,\r\n          c.url as category_url,\r\n          s.state_name,\r\n          sa.area_name,\r\n          (SELECT pi.name FROM product_images pi\r\n           WHERE pi.product_id = p.product_id AND pi.default = 1 LIMIT 1) as default_image,\r\n          (SELECT GROUP_CONCAT(pi.name) FROM product_images pi\r\n           WHERE pi.product_id = p.product_id) as all_images\r\n        FROM product p\r\n        LEFT JOIN category c ON p.category_id = c.category_id\r\n        LEFT JOIN state s ON p.state = s.state_id\r\n        LEFT JOIN state_area sa ON p.state_area = sa.state_area_id\r\n        WHERE p.product_id = ?\r\n        LIMIT 1\r\n      `;\n            const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(query, [\n                id\n            ]);\n            const billboard = rows?.[0] || null;\n            if (billboard && billboard.all_images) {\n                billboard.images = billboard.all_images.split(\",\");\n            }\n            return ok(req, {\n                data: billboard\n            });\n        }\n        // Build filters\n        let whereClause = \"WHERE p.status = 1\"; // Only active products\n        const params = [];\n        if (category_id) {\n            whereClause += \" AND p.category_id = ?\";\n            params.push(category_id);\n        }\n        if (state) {\n            whereClause += \" AND p.state = ?\";\n            params.push(state);\n        }\n        // Get all billboards with joins\n        const query = `\r\n      SELECT\r\n        p.product_id,\r\n        p.name,\r\n        p.url,\r\n        p.price,\r\n        p.category_id,\r\n        p.size,\r\n        p.gps_location,\r\n        p.address,\r\n        p.state,\r\n        p.state_area,\r\n        p.long_desc as description,\r\n        p.short_desc,\r\n        p.product_status as status,\r\n        p.date_added,\r\n        p.date_updated,\r\n        c.name as category_name,\r\n        c.url as category_url,\r\n        s.state_name,\r\n        sa.area_name,\r\n        (SELECT pi.name FROM product_images pi\r\n         WHERE pi.product_id = p.product_id AND pi.default = 1 LIMIT 1) as image_url\r\n      FROM product p\r\n      LEFT JOIN category c ON p.category_id = c.category_id\r\n      LEFT JOIN state s ON p.state = s.state_id\r\n      LEFT JOIN state_area sa ON p.state_area = sa.state_area_id\r\n      ${whereClause}\r\n      ORDER BY p.date_added DESC\r\n      LIMIT ? OFFSET ?\r\n    `;\n        params.push(limit, offset);\n        const [rows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(query, params);\n        // Get total count\n        const countQuery = `SELECT COUNT(*) as total FROM product p ${whereClause}`;\n        const [countRows] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(countQuery, params.slice(0, -2));\n        const total = countRows[0]?.total || 0;\n        return ok(req, {\n            data: rows || [],\n            total,\n            limit,\n            offset\n        });\n    } catch (e) {\n        console.error(\"Billboards API Error:\", e);\n        return fail(req, e?.sqlMessage || e?.message || \"Server error\", 500);\n    }\n}\n/**\r\n * POST /api/billboards\r\n * Create a new billboard (product)\r\n */ async function POST(req) {\n    try {\n        const body = await req.json();\n        if (!body || typeof body !== \"object\") {\n            return fail(req, \"Body must be a JSON object\", 400);\n        }\n        // Map billboard data to product table structure\n        const productData = {\n            name: body.title || body.name,\n            url: body.url || (body.title || body.name).toLowerCase().replace(/[^a-z0-9]+/g, \"-\"),\n            price: body.price || 0,\n            category_id: body.category_id || 1,\n            shop_id: 0,\n            quantity: 1,\n            viewed: 0,\n            sku: \"\",\n            exp_date: \"\",\n            weight: \"\",\n            status: 1,\n            product_status: body.status || \"available\",\n            size: body.size || \"\",\n            gps_location: body.gps_location || \"\",\n            address: body.address || body.location || \"\",\n            state: body.state || \"1\",\n            state_area: body.state_area || \"1\",\n            long_desc: body.description || body.long_desc || \"\",\n            short_desc: body.short_desc || body.description?.substring(0, 200) || \"\",\n            meta_title: body.meta_title || body.title || body.name,\n            meta_description: body.meta_description || \"\",\n            meta_keyword: body.meta_keyword || \"\",\n            date_added: new Date(),\n            date_updated: new Date(),\n            special: 0,\n            product_related_id: 0,\n            profit: 0\n        };\n        const [result] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"INSERT INTO product SET ?\", [\n            productData\n        ]);\n        // Handle multiple images if provided\n        if (result.insertId) {\n            const images = body.images || (body.image_url ? [\n                body.image_url\n            ] : []);\n            if (images.length > 0) {\n                for(let i = 0; i < images.length; i++){\n                    const imageData = {\n                        product_id: result.insertId,\n                        name: images[i],\n                        default: i === 0 ? 1 : 0,\n                        date_created: new Date(),\n                        date_updated: new Date()\n                    };\n                    await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"INSERT INTO product_images SET ?\", [\n                        imageData\n                    ]);\n                }\n            }\n        }\n        return ok(req, {\n            success: true,\n            data: {\n                product_id: result.insertId,\n                ...productData\n            }\n        }, 201);\n    } catch (e) {\n        console.error(\"Billboards POST Error:\", e);\n        return fail(req, e?.sqlMessage || e?.message || \"Server error\", 500);\n    }\n}\n/**\r\n * PUT /api/billboards?id=X\r\n * Update a billboard (product)\r\n */ async function PUT(req) {\n    try {\n        const url = new URL(req.url);\n        const id = url.searchParams.get(\"id\");\n        if (!id) {\n            return fail(req, \"Missing 'id' query parameter\", 400);\n        }\n        const body = await req.json();\n        if (!body || typeof body !== \"object\") {\n            return fail(req, \"Body must be a JSON object\", 400);\n        }\n        // Map billboard updates to product table\n        const updates = {};\n        if (body.title || body.name) updates.name = body.title || body.name;\n        if (body.price !== undefined) updates.price = body.price;\n        if (body.category_id) updates.category_id = body.category_id;\n        if (body.size) updates.size = body.size;\n        if (body.location || body.address) updates.address = body.location || body.address;\n        if (body.state) updates.state = body.state;\n        if (body.state_area) updates.state_area = body.state_area;\n        if (body.gps_location) updates.gps_location = body.gps_location;\n        if (body.description) {\n            updates.long_desc = body.description;\n            updates.short_desc = body.description.substring(0, 200);\n        }\n        if (body.status) updates.product_status = body.status;\n        updates.date_updated = new Date();\n        if (Object.keys(updates).length === 0) {\n            return fail(req, \"No fields to update\", 400);\n        }\n        const [result] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"UPDATE product SET ? WHERE product_id = ?\", [\n            updates,\n            id\n        ]);\n        // Update images if provided\n        if (body.images && Array.isArray(body.images) && body.images.length > 0) {\n            // Delete existing images\n            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"DELETE FROM product_images WHERE product_id = ?\", [\n                id\n            ]);\n            // Insert new images\n            for(let i = 0; i < body.images.length; i++){\n                const imageData = {\n                    product_id: id,\n                    name: body.images[i],\n                    default: i === 0 ? 1 : 0,\n                    date_created: new Date(),\n                    date_updated: new Date()\n                };\n                await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"INSERT INTO product_images SET ?\", [\n                    imageData\n                ]);\n            }\n        } else if (body.image_url) {\n            // Single image update (backward compatibility)\n            const [existingImages] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"SELECT image_id FROM product_images WHERE product_id = ? AND `default` = 1\", [\n                id\n            ]);\n            if (existingImages.length > 0) {\n                await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"UPDATE product_images SET name = ?, date_updated = ? WHERE product_id = ? AND `default` = 1\", [\n                    body.image_url,\n                    new Date(),\n                    id\n                ]);\n            } else {\n                const imageData = {\n                    product_id: id,\n                    name: body.image_url,\n                    default: 1,\n                    date_created: new Date(),\n                    date_updated: new Date()\n                };\n                await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"INSERT INTO product_images SET ?\", [\n                    imageData\n                ]);\n            }\n        }\n        return ok(req, {\n            success: true,\n            affectedRows: result.affectedRows\n        });\n    } catch (e) {\n        console.error(\"Billboards PUT Error:\", e);\n        return fail(req, e?.sqlMessage || e?.message || \"Server error\", 500);\n    }\n}\n/**\r\n * DELETE /api/billboards?id=X\r\n * Delete a billboard (product)\r\n */ async function DELETE(req) {\n    try {\n        const url = new URL(req.url);\n        const id = url.searchParams.get(\"id\");\n        if (!id) {\n            return fail(req, \"Missing 'id' query parameter\", 400);\n        }\n        // Delete images first\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"DELETE FROM product_images WHERE product_id = ?\", [\n            id\n        ]);\n        // Delete product\n        const [result] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query(\"DELETE FROM product WHERE product_id = ?\", [\n            id\n        ]);\n        return ok(req, {\n            success: true,\n            affectedRows: result.affectedRows\n        });\n    } catch (e) {\n        console.error(\"Billboards DELETE Error:\", e);\n        return fail(req, e?.sqlMessage || e?.message || \"Server error\", 500);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O0lBQ3ZDLElBQUk7UUFDRixNQUFNUSxNQUFNLElBQUlDLElBQUlULElBQUlRLEdBQUc7UUFDM0IsTUFBTUUsS0FBS0YsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUM7UUFFaEMsSUFBSSxDQUFDRixJQUFJO1lBQ1AsT0FBT1AsS0FBS0gsS0FBSyxnQ0FBZ0M7UUFDbkQ7UUFFQSxzQkFBc0I7UUFDdEIsTUFBTVgsdUNBQUVBLENBQUNnQyxLQUFLLENBQUMsbURBQW1EO1lBQUNYO1NBQUc7UUFFdEUsaUJBQWlCO1FBQ2pCLE1BQU0sQ0FBQzRELE9BQU8sR0FBUSxNQUFNakYsdUNBQUVBLENBQUNnQyxLQUFLLENBQUMsNENBQTRDO1lBQUNYO1NBQUc7UUFFckYsT0FBT1gsR0FBR0MsS0FBSztZQUNiK0UsU0FBUztZQUNUUyxjQUFjbEIsT0FBT2tCLFlBQVk7UUFDbkM7SUFFRixFQUFFLE9BQU90RCxHQUFRO1FBQ2ZDLFFBQVE5QixLQUFLLENBQUMsNEJBQTRCNkI7UUFDMUMsT0FBTy9CLEtBQUtILEtBQUtrQyxHQUFHRSxjQUFjRixHQUFHOUIsV0FBVyxnQkFBZ0I7SUFDbEU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL291dGRvb3JzLW5leHRqcy1hcGkvLi9hcHAvYXBpL2JpbGxib2FyZHMvcm91dGUudHM/ZjY3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgcnVudGltZSA9IFwibm9kZWpzXCI7XHJcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gXCJmb3JjZS1keW5hbWljXCI7XHJcblxyXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcclxuaW1wb3J0IHsgZGIgfSBmcm9tIFwiQC9saWIvZGJcIjtcclxuaW1wb3J0IHsgd2l0aENvcnMgfSBmcm9tIFwiQC9saWIvY29yc1wiO1xyXG5cclxuZnVuY3Rpb24gdG9Kc29uU2FmZShkYXRhOiBhbnkpIHtcclxuICByZXR1cm4gSlNPTi5wYXJzZShcclxuICAgIEpTT04uc3RyaW5naWZ5KGRhdGEsIChfaywgdikgPT4gKHR5cGVvZiB2ID09PSBcImJpZ2ludFwiID8gdi50b1N0cmluZygpIDogdikpXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb2socmVxOiBSZXF1ZXN0LCBkYXRhOiBhbnksIHN0YXR1cyA9IDIwMCkge1xyXG4gIHJldHVybiB3aXRoQ29ycyhyZXEsIE5leHRSZXNwb25zZS5qc29uKHRvSnNvblNhZmUoZGF0YSksIHsgc3RhdHVzIH0pKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmFpbChyZXE6IFJlcXVlc3QsIG1lc3NhZ2U6IHN0cmluZywgc3RhdHVzID0gNTAwKSB7XHJcbiAgcmV0dXJuIHdpdGhDb3JzKHJlcSwgTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogbWVzc2FnZSB9LCB7IHN0YXR1cyB9KSk7XHJcbn1cclxuXHJcbi8vIEhhbmRsZSBwcmVmbGlnaHRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIE9QVElPTlMocmVxOiBSZXF1ZXN0KSB7XHJcbiAgcmV0dXJuIHdpdGhDb3JzKHJlcSwgbmV3IE5leHRSZXNwb25zZShudWxsLCB7IHN0YXR1czogMjA0IH0pKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdFVCAvYXBpL2JpbGxib2FyZHNcclxuICogUmV0dXJucyBhbGwgcHJvZHVjdHMgKGJpbGxib2FyZHMpIHdpdGggdGhlaXIgY2F0ZWdvcmllcywgaW1hZ2VzLCBhbmQgbG9jYXRpb24gZGF0YVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcclxuICAgIGNvbnN0IGlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJpZFwiKTtcclxuICAgIGNvbnN0IGNhdGVnb3J5X2lkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjYXRlZ29yeV9pZFwiKTtcclxuICAgIGNvbnN0IHN0YXRlID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzdGF0ZVwiKTtcclxuICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5taW4oTnVtYmVyKHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwibGltaXRcIikgfHwgMTAwKSwgNTAwKTtcclxuICAgIGNvbnN0IG9mZnNldCA9IE1hdGgubWF4KE51bWJlcih1cmwuc2VhcmNoUGFyYW1zLmdldChcIm9mZnNldFwiKSB8fCAwKSwgMCk7XHJcblxyXG4gICAgLy8gR2V0IHNpbmdsZSBiaWxsYm9hcmQgYnkgSURcclxuICAgIGlmIChpZCkge1xyXG4gICAgICBjb25zdCBxdWVyeSA9IGBcclxuICAgICAgICBTRUxFQ1RcclxuICAgICAgICAgIHAuKixcclxuICAgICAgICAgIGMubmFtZSBhcyBjYXRlZ29yeV9uYW1lLFxyXG4gICAgICAgICAgYy51cmwgYXMgY2F0ZWdvcnlfdXJsLFxyXG4gICAgICAgICAgcy5zdGF0ZV9uYW1lLFxyXG4gICAgICAgICAgc2EuYXJlYV9uYW1lLFxyXG4gICAgICAgICAgKFNFTEVDVCBwaS5uYW1lIEZST00gcHJvZHVjdF9pbWFnZXMgcGlcclxuICAgICAgICAgICBXSEVSRSBwaS5wcm9kdWN0X2lkID0gcC5wcm9kdWN0X2lkIEFORCBwaS5kZWZhdWx0ID0gMSBMSU1JVCAxKSBhcyBkZWZhdWx0X2ltYWdlLFxyXG4gICAgICAgICAgKFNFTEVDVCBHUk9VUF9DT05DQVQocGkubmFtZSkgRlJPTSBwcm9kdWN0X2ltYWdlcyBwaVxyXG4gICAgICAgICAgIFdIRVJFIHBpLnByb2R1Y3RfaWQgPSBwLnByb2R1Y3RfaWQpIGFzIGFsbF9pbWFnZXNcclxuICAgICAgICBGUk9NIHByb2R1Y3QgcFxyXG4gICAgICAgIExFRlQgSk9JTiBjYXRlZ29yeSBjIE9OIHAuY2F0ZWdvcnlfaWQgPSBjLmNhdGVnb3J5X2lkXHJcbiAgICAgICAgTEVGVCBKT0lOIHN0YXRlIHMgT04gcC5zdGF0ZSA9IHMuc3RhdGVfaWRcclxuICAgICAgICBMRUZUIEpPSU4gc3RhdGVfYXJlYSBzYSBPTiBwLnN0YXRlX2FyZWEgPSBzYS5zdGF0ZV9hcmVhX2lkXHJcbiAgICAgICAgV0hFUkUgcC5wcm9kdWN0X2lkID0gP1xyXG4gICAgICAgIExJTUlUIDFcclxuICAgICAgYDtcclxuXHJcbiAgICAgIGNvbnN0IFtyb3dzXTogYW55ID0gYXdhaXQgZGIucXVlcnkocXVlcnksIFtpZF0pO1xyXG4gICAgICBjb25zdCBiaWxsYm9hcmQgPSByb3dzPy5bMF0gfHwgbnVsbDtcclxuXHJcbiAgICAgIGlmIChiaWxsYm9hcmQgJiYgYmlsbGJvYXJkLmFsbF9pbWFnZXMpIHtcclxuICAgICAgICBiaWxsYm9hcmQuaW1hZ2VzID0gYmlsbGJvYXJkLmFsbF9pbWFnZXMuc3BsaXQoJywnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG9rKHJlcSwgeyBkYXRhOiBiaWxsYm9hcmQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQnVpbGQgZmlsdGVyc1xyXG4gICAgbGV0IHdoZXJlQ2xhdXNlID0gXCJXSEVSRSBwLnN0YXR1cyA9IDFcIjsgLy8gT25seSBhY3RpdmUgcHJvZHVjdHNcclxuICAgIGNvbnN0IHBhcmFtczogYW55W10gPSBbXTtcclxuXHJcbiAgICBpZiAoY2F0ZWdvcnlfaWQpIHtcclxuICAgICAgd2hlcmVDbGF1c2UgKz0gXCIgQU5EIHAuY2F0ZWdvcnlfaWQgPSA/XCI7XHJcbiAgICAgIHBhcmFtcy5wdXNoKGNhdGVnb3J5X2lkKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgd2hlcmVDbGF1c2UgKz0gXCIgQU5EIHAuc3RhdGUgPSA/XCI7XHJcbiAgICAgIHBhcmFtcy5wdXNoKHN0YXRlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgYWxsIGJpbGxib2FyZHMgd2l0aCBqb2luc1xyXG4gICAgY29uc3QgcXVlcnkgPSBgXHJcbiAgICAgIFNFTEVDVFxyXG4gICAgICAgIHAucHJvZHVjdF9pZCxcclxuICAgICAgICBwLm5hbWUsXHJcbiAgICAgICAgcC51cmwsXHJcbiAgICAgICAgcC5wcmljZSxcclxuICAgICAgICBwLmNhdGVnb3J5X2lkLFxyXG4gICAgICAgIHAuc2l6ZSxcclxuICAgICAgICBwLmdwc19sb2NhdGlvbixcclxuICAgICAgICBwLmFkZHJlc3MsXHJcbiAgICAgICAgcC5zdGF0ZSxcclxuICAgICAgICBwLnN0YXRlX2FyZWEsXHJcbiAgICAgICAgcC5sb25nX2Rlc2MgYXMgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgcC5zaG9ydF9kZXNjLFxyXG4gICAgICAgIHAucHJvZHVjdF9zdGF0dXMgYXMgc3RhdHVzLFxyXG4gICAgICAgIHAuZGF0ZV9hZGRlZCxcclxuICAgICAgICBwLmRhdGVfdXBkYXRlZCxcclxuICAgICAgICBjLm5hbWUgYXMgY2F0ZWdvcnlfbmFtZSxcclxuICAgICAgICBjLnVybCBhcyBjYXRlZ29yeV91cmwsXHJcbiAgICAgICAgcy5zdGF0ZV9uYW1lLFxyXG4gICAgICAgIHNhLmFyZWFfbmFtZSxcclxuICAgICAgICAoU0VMRUNUIHBpLm5hbWUgRlJPTSBwcm9kdWN0X2ltYWdlcyBwaVxyXG4gICAgICAgICBXSEVSRSBwaS5wcm9kdWN0X2lkID0gcC5wcm9kdWN0X2lkIEFORCBwaS5kZWZhdWx0ID0gMSBMSU1JVCAxKSBhcyBpbWFnZV91cmxcclxuICAgICAgRlJPTSBwcm9kdWN0IHBcclxuICAgICAgTEVGVCBKT0lOIGNhdGVnb3J5IGMgT04gcC5jYXRlZ29yeV9pZCA9IGMuY2F0ZWdvcnlfaWRcclxuICAgICAgTEVGVCBKT0lOIHN0YXRlIHMgT04gcC5zdGF0ZSA9IHMuc3RhdGVfaWRcclxuICAgICAgTEVGVCBKT0lOIHN0YXRlX2FyZWEgc2EgT04gcC5zdGF0ZV9hcmVhID0gc2Euc3RhdGVfYXJlYV9pZFxyXG4gICAgICAke3doZXJlQ2xhdXNlfVxyXG4gICAgICBPUkRFUiBCWSBwLmRhdGVfYWRkZWQgREVTQ1xyXG4gICAgICBMSU1JVCA/IE9GRlNFVCA/XHJcbiAgICBgO1xyXG5cclxuICAgIHBhcmFtcy5wdXNoKGxpbWl0LCBvZmZzZXQpO1xyXG4gICAgY29uc3QgW3Jvd3NdOiBhbnkgPSBhd2FpdCBkYi5xdWVyeShxdWVyeSwgcGFyYW1zKTtcclxuXHJcbiAgICAvLyBHZXQgdG90YWwgY291bnRcclxuICAgIGNvbnN0IGNvdW50UXVlcnkgPSBgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsIEZST00gcHJvZHVjdCBwICR7d2hlcmVDbGF1c2V9YDtcclxuICAgIGNvbnN0IFtjb3VudFJvd3NdOiBhbnkgPSBhd2FpdCBkYi5xdWVyeShjb3VudFF1ZXJ5LCBwYXJhbXMuc2xpY2UoMCwgLTIpKTtcclxuICAgIGNvbnN0IHRvdGFsID0gY291bnRSb3dzWzBdPy50b3RhbCB8fCAwO1xyXG5cclxuICAgIHJldHVybiBvayhyZXEsIHtcclxuICAgICAgZGF0YTogcm93cyB8fCBbXSxcclxuICAgICAgdG90YWwsXHJcbiAgICAgIGxpbWl0LFxyXG4gICAgICBvZmZzZXRcclxuICAgIH0pO1xyXG5cclxuICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJCaWxsYm9hcmRzIEFQSSBFcnJvcjpcIiwgZSk7XHJcbiAgICByZXR1cm4gZmFpbChyZXEsIGU/LnNxbE1lc3NhZ2UgfHwgZT8ubWVzc2FnZSB8fCBcIlNlcnZlciBlcnJvclwiLCA1MDApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBPU1QgL2FwaS9iaWxsYm9hcmRzXHJcbiAqIENyZWF0ZSBhIG5ldyBiaWxsYm9hcmQgKHByb2R1Y3QpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcblxyXG4gICAgaWYgKCFib2R5IHx8IHR5cGVvZiBib2R5ICE9PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgIHJldHVybiBmYWlsKHJlcSwgXCJCb2R5IG11c3QgYmUgYSBKU09OIG9iamVjdFwiLCA0MDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE1hcCBiaWxsYm9hcmQgZGF0YSB0byBwcm9kdWN0IHRhYmxlIHN0cnVjdHVyZVxyXG4gICAgY29uc3QgcHJvZHVjdERhdGE6IGFueSA9IHtcclxuICAgICAgbmFtZTogYm9keS50aXRsZSB8fCBib2R5Lm5hbWUsXHJcbiAgICAgIHVybDogYm9keS51cmwgfHwgKGJvZHkudGl0bGUgfHwgYm9keS5uYW1lKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teYS16MC05XSsvZywgJy0nKSxcclxuICAgICAgcHJpY2U6IGJvZHkucHJpY2UgfHwgMCxcclxuICAgICAgY2F0ZWdvcnlfaWQ6IGJvZHkuY2F0ZWdvcnlfaWQgfHwgMSxcclxuICAgICAgc2hvcF9pZDogMCxcclxuICAgICAgcXVhbnRpdHk6IDEsXHJcbiAgICAgIHZpZXdlZDogMCxcclxuICAgICAgc2t1OiAnJyxcclxuICAgICAgZXhwX2RhdGU6ICcnLFxyXG4gICAgICB3ZWlnaHQ6ICcnLFxyXG4gICAgICBzdGF0dXM6IDEsXHJcbiAgICAgIHByb2R1Y3Rfc3RhdHVzOiBib2R5LnN0YXR1cyB8fCAnYXZhaWxhYmxlJyxcclxuICAgICAgc2l6ZTogYm9keS5zaXplIHx8ICcnLFxyXG4gICAgICBncHNfbG9jYXRpb246IGJvZHkuZ3BzX2xvY2F0aW9uIHx8ICcnLFxyXG4gICAgICBhZGRyZXNzOiBib2R5LmFkZHJlc3MgfHwgYm9keS5sb2NhdGlvbiB8fCAnJyxcclxuICAgICAgc3RhdGU6IGJvZHkuc3RhdGUgfHwgJzEnLFxyXG4gICAgICBzdGF0ZV9hcmVhOiBib2R5LnN0YXRlX2FyZWEgfHwgJzEnLFxyXG4gICAgICBsb25nX2Rlc2M6IGJvZHkuZGVzY3JpcHRpb24gfHwgYm9keS5sb25nX2Rlc2MgfHwgJycsXHJcbiAgICAgIHNob3J0X2Rlc2M6IGJvZHkuc2hvcnRfZGVzYyB8fCBib2R5LmRlc2NyaXB0aW9uPy5zdWJzdHJpbmcoMCwgMjAwKSB8fCAnJyxcclxuICAgICAgbWV0YV90aXRsZTogYm9keS5tZXRhX3RpdGxlIHx8IGJvZHkudGl0bGUgfHwgYm9keS5uYW1lLFxyXG4gICAgICBtZXRhX2Rlc2NyaXB0aW9uOiBib2R5Lm1ldGFfZGVzY3JpcHRpb24gfHwgJycsXHJcbiAgICAgIG1ldGFfa2V5d29yZDogYm9keS5tZXRhX2tleXdvcmQgfHwgJycsXHJcbiAgICAgIGRhdGVfYWRkZWQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIGRhdGVfdXBkYXRlZDogbmV3IERhdGUoKSxcclxuICAgICAgc3BlY2lhbDogMCxcclxuICAgICAgcHJvZHVjdF9yZWxhdGVkX2lkOiAwLFxyXG4gICAgICBwcm9maXQ6IDBcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgW3Jlc3VsdF06IGFueSA9IGF3YWl0IGRiLnF1ZXJ5KFwiSU5TRVJUIElOVE8gcHJvZHVjdCBTRVQgP1wiLCBbcHJvZHVjdERhdGFdKTtcclxuXHJcbiAgICAvLyBIYW5kbGUgbXVsdGlwbGUgaW1hZ2VzIGlmIHByb3ZpZGVkXHJcbiAgICBpZiAocmVzdWx0Lmluc2VydElkKSB7XHJcbiAgICAgIGNvbnN0IGltYWdlcyA9IGJvZHkuaW1hZ2VzIHx8IChib2R5LmltYWdlX3VybCA/IFtib2R5LmltYWdlX3VybF0gOiBbXSk7XHJcblxyXG4gICAgICBpZiAoaW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0ge1xyXG4gICAgICAgICAgICBwcm9kdWN0X2lkOiByZXN1bHQuaW5zZXJ0SWQsXHJcbiAgICAgICAgICAgIG5hbWU6IGltYWdlc1tpXSxcclxuICAgICAgICAgICAgZGVmYXVsdDogaSA9PT0gMCA/IDEgOiAwLCAvLyBGaXJzdCBpbWFnZSBpcyBkZWZhdWx0XHJcbiAgICAgICAgICAgIGRhdGVfY3JlYXRlZDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgZGF0ZV91cGRhdGVkOiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgYXdhaXQgZGIucXVlcnkoXCJJTlNFUlQgSU5UTyBwcm9kdWN0X2ltYWdlcyBTRVQgP1wiLCBbaW1hZ2VEYXRhXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9rKHJlcSwge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgcHJvZHVjdF9pZDogcmVzdWx0Lmluc2VydElkLFxyXG4gICAgICAgIC4uLnByb2R1Y3REYXRhXHJcbiAgICAgIH1cclxuICAgIH0sIDIwMSk7XHJcblxyXG4gIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkJpbGxib2FyZHMgUE9TVCBFcnJvcjpcIiwgZSk7XHJcbiAgICByZXR1cm4gZmFpbChyZXEsIGU/LnNxbE1lc3NhZ2UgfHwgZT8ubWVzc2FnZSB8fCBcIlNlcnZlciBlcnJvclwiLCA1MDApO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBVVCAvYXBpL2JpbGxib2FyZHM/aWQ9WFxyXG4gKiBVcGRhdGUgYSBiaWxsYm9hcmQgKHByb2R1Y3QpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcTogUmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xyXG4gICAgY29uc3QgaWQgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImlkXCIpO1xyXG5cclxuICAgIGlmICghaWQpIHtcclxuICAgICAgcmV0dXJuIGZhaWwocmVxLCBcIk1pc3NpbmcgJ2lkJyBxdWVyeSBwYXJhbWV0ZXJcIiwgNDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuICAgIGlmICghYm9keSB8fCB0eXBlb2YgYm9keSAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICByZXR1cm4gZmFpbChyZXEsIFwiQm9keSBtdXN0IGJlIGEgSlNPTiBvYmplY3RcIiwgNDAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNYXAgYmlsbGJvYXJkIHVwZGF0ZXMgdG8gcHJvZHVjdCB0YWJsZVxyXG4gICAgY29uc3QgdXBkYXRlczogYW55ID0ge307XHJcblxyXG4gICAgaWYgKGJvZHkudGl0bGUgfHwgYm9keS5uYW1lKSB1cGRhdGVzLm5hbWUgPSBib2R5LnRpdGxlIHx8IGJvZHkubmFtZTtcclxuICAgIGlmIChib2R5LnByaWNlICE9PSB1bmRlZmluZWQpIHVwZGF0ZXMucHJpY2UgPSBib2R5LnByaWNlO1xyXG4gICAgaWYgKGJvZHkuY2F0ZWdvcnlfaWQpIHVwZGF0ZXMuY2F0ZWdvcnlfaWQgPSBib2R5LmNhdGVnb3J5X2lkO1xyXG4gICAgaWYgKGJvZHkuc2l6ZSkgdXBkYXRlcy5zaXplID0gYm9keS5zaXplO1xyXG4gICAgaWYgKGJvZHkubG9jYXRpb24gfHwgYm9keS5hZGRyZXNzKSB1cGRhdGVzLmFkZHJlc3MgPSBib2R5LmxvY2F0aW9uIHx8IGJvZHkuYWRkcmVzcztcclxuICAgIGlmIChib2R5LnN0YXRlKSB1cGRhdGVzLnN0YXRlID0gYm9keS5zdGF0ZTtcclxuICAgIGlmIChib2R5LnN0YXRlX2FyZWEpIHVwZGF0ZXMuc3RhdGVfYXJlYSA9IGJvZHkuc3RhdGVfYXJlYTtcclxuICAgIGlmIChib2R5Lmdwc19sb2NhdGlvbikgdXBkYXRlcy5ncHNfbG9jYXRpb24gPSBib2R5Lmdwc19sb2NhdGlvbjtcclxuICAgIGlmIChib2R5LmRlc2NyaXB0aW9uKSB7XHJcbiAgICAgIHVwZGF0ZXMubG9uZ19kZXNjID0gYm9keS5kZXNjcmlwdGlvbjtcclxuICAgICAgdXBkYXRlcy5zaG9ydF9kZXNjID0gYm9keS5kZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgMjAwKTtcclxuICAgIH1cclxuICAgIGlmIChib2R5LnN0YXR1cykgdXBkYXRlcy5wcm9kdWN0X3N0YXR1cyA9IGJvZHkuc3RhdHVzO1xyXG4gICAgdXBkYXRlcy5kYXRlX3VwZGF0ZWQgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgIGlmIChPYmplY3Qua2V5cyh1cGRhdGVzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuIGZhaWwocmVxLCBcIk5vIGZpZWxkcyB0byB1cGRhdGVcIiwgNDAwKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBbcmVzdWx0XTogYW55ID0gYXdhaXQgZGIucXVlcnkoXHJcbiAgICAgIFwiVVBEQVRFIHByb2R1Y3QgU0VUID8gV0hFUkUgcHJvZHVjdF9pZCA9ID9cIixcclxuICAgICAgW3VwZGF0ZXMsIGlkXVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBVcGRhdGUgaW1hZ2VzIGlmIHByb3ZpZGVkXHJcbiAgICBpZiAoYm9keS5pbWFnZXMgJiYgQXJyYXkuaXNBcnJheShib2R5LmltYWdlcykgJiYgYm9keS5pbWFnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAvLyBEZWxldGUgZXhpc3RpbmcgaW1hZ2VzXHJcbiAgICAgIGF3YWl0IGRiLnF1ZXJ5KFwiREVMRVRFIEZST00gcHJvZHVjdF9pbWFnZXMgV0hFUkUgcHJvZHVjdF9pZCA9ID9cIiwgW2lkXSk7XHJcblxyXG4gICAgICAvLyBJbnNlcnQgbmV3IGltYWdlc1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZHkuaW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0ge1xyXG4gICAgICAgICAgcHJvZHVjdF9pZDogaWQsXHJcbiAgICAgICAgICBuYW1lOiBib2R5LmltYWdlc1tpXSxcclxuICAgICAgICAgIGRlZmF1bHQ6IGkgPT09IDAgPyAxIDogMCwgLy8gRmlyc3QgaW1hZ2UgaXMgZGVmYXVsdFxyXG4gICAgICAgICAgZGF0ZV9jcmVhdGVkOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgZGF0ZV91cGRhdGVkOiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhd2FpdCBkYi5xdWVyeShcIklOU0VSVCBJTlRPIHByb2R1Y3RfaW1hZ2VzIFNFVCA/XCIsIFtpbWFnZURhdGFdKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChib2R5LmltYWdlX3VybCkge1xyXG4gICAgICAvLyBTaW5nbGUgaW1hZ2UgdXBkYXRlIChiYWNrd2FyZCBjb21wYXRpYmlsaXR5KVxyXG4gICAgICBjb25zdCBbZXhpc3RpbmdJbWFnZXNdOiBhbnkgPSBhd2FpdCBkYi5xdWVyeShcclxuICAgICAgICBcIlNFTEVDVCBpbWFnZV9pZCBGUk9NIHByb2R1Y3RfaW1hZ2VzIFdIRVJFIHByb2R1Y3RfaWQgPSA/IEFORCBgZGVmYXVsdGAgPSAxXCIsXHJcbiAgICAgICAgW2lkXVxyXG4gICAgICApO1xyXG5cclxuICAgICAgaWYgKGV4aXN0aW5nSW1hZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBhd2FpdCBkYi5xdWVyeShcclxuICAgICAgICAgIFwiVVBEQVRFIHByb2R1Y3RfaW1hZ2VzIFNFVCBuYW1lID0gPywgZGF0ZV91cGRhdGVkID0gPyBXSEVSRSBwcm9kdWN0X2lkID0gPyBBTkQgYGRlZmF1bHRgID0gMVwiLFxyXG4gICAgICAgICAgW2JvZHkuaW1hZ2VfdXJsLCBuZXcgRGF0ZSgpLCBpZF1cclxuICAgICAgICApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IHtcclxuICAgICAgICAgIHByb2R1Y3RfaWQ6IGlkLFxyXG4gICAgICAgICAgbmFtZTogYm9keS5pbWFnZV91cmwsXHJcbiAgICAgICAgICBkZWZhdWx0OiAxLFxyXG4gICAgICAgICAgZGF0ZV9jcmVhdGVkOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgZGF0ZV91cGRhdGVkOiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhd2FpdCBkYi5xdWVyeShcIklOU0VSVCBJTlRPIHByb2R1Y3RfaW1hZ2VzIFNFVCA/XCIsIFtpbWFnZURhdGFdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvayhyZXEsIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgYWZmZWN0ZWRSb3dzOiByZXN1bHQuYWZmZWN0ZWRSb3dzXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZTogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiQmlsbGJvYXJkcyBQVVQgRXJyb3I6XCIsIGUpO1xyXG4gICAgcmV0dXJuIGZhaWwocmVxLCBlPy5zcWxNZXNzYWdlIHx8IGU/Lm1lc3NhZ2UgfHwgXCJTZXJ2ZXIgZXJyb3JcIiwgNTAwKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBERUxFVEUgL2FwaS9iaWxsYm9hcmRzP2lkPVhcclxuICogRGVsZXRlIGEgYmlsbGJvYXJkIChwcm9kdWN0KVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXE6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTChyZXEudXJsKTtcclxuICAgIGNvbnN0IGlkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJpZFwiKTtcclxuXHJcbiAgICBpZiAoIWlkKSB7XHJcbiAgICAgIHJldHVybiBmYWlsKHJlcSwgXCJNaXNzaW5nICdpZCcgcXVlcnkgcGFyYW1ldGVyXCIsIDQwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVsZXRlIGltYWdlcyBmaXJzdFxyXG4gICAgYXdhaXQgZGIucXVlcnkoXCJERUxFVEUgRlJPTSBwcm9kdWN0X2ltYWdlcyBXSEVSRSBwcm9kdWN0X2lkID0gP1wiLCBbaWRdKTtcclxuXHJcbiAgICAvLyBEZWxldGUgcHJvZHVjdFxyXG4gICAgY29uc3QgW3Jlc3VsdF06IGFueSA9IGF3YWl0IGRiLnF1ZXJ5KFwiREVMRVRFIEZST00gcHJvZHVjdCBXSEVSRSBwcm9kdWN0X2lkID0gP1wiLCBbaWRdKTtcclxuXHJcbiAgICByZXR1cm4gb2socmVxLCB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIGFmZmVjdGVkUm93czogcmVzdWx0LmFmZmVjdGVkUm93c1xyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkJpbGxib2FyZHMgREVMRVRFIEVycm9yOlwiLCBlKTtcclxuICAgIHJldHVybiBmYWlsKHJlcSwgZT8uc3FsTWVzc2FnZSB8fCBlPy5tZXNzYWdlIHx8IFwiU2VydmVyIGVycm9yXCIsIDUwMCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJydW50aW1lIiwiZHluYW1pYyIsIk5leHRSZXNwb25zZSIsImRiIiwid2l0aENvcnMiLCJ0b0pzb25TYWZlIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsIl9rIiwidiIsInRvU3RyaW5nIiwib2siLCJyZXEiLCJzdGF0dXMiLCJqc29uIiwiZmFpbCIsIm1lc3NhZ2UiLCJlcnJvciIsIk9QVElPTlMiLCJHRVQiLCJ1cmwiLCJVUkwiLCJpZCIsInNlYXJjaFBhcmFtcyIsImdldCIsImNhdGVnb3J5X2lkIiwic3RhdGUiLCJsaW1pdCIsIk1hdGgiLCJtaW4iLCJOdW1iZXIiLCJvZmZzZXQiLCJtYXgiLCJxdWVyeSIsInJvd3MiLCJiaWxsYm9hcmQiLCJhbGxfaW1hZ2VzIiwiaW1hZ2VzIiwic3BsaXQiLCJ3aGVyZUNsYXVzZSIsInBhcmFtcyIsInB1c2giLCJjb3VudFF1ZXJ5IiwiY291bnRSb3dzIiwic2xpY2UiLCJ0b3RhbCIsImUiLCJjb25zb2xlIiwic3FsTWVzc2FnZSIsIlBPU1QiLCJib2R5IiwicHJvZHVjdERhdGEiLCJuYW1lIiwidGl0bGUiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJwcmljZSIsInNob3BfaWQiLCJxdWFudGl0eSIsInZpZXdlZCIsInNrdSIsImV4cF9kYXRlIiwid2VpZ2h0IiwicHJvZHVjdF9zdGF0dXMiLCJzaXplIiwiZ3BzX2xvY2F0aW9uIiwiYWRkcmVzcyIsImxvY2F0aW9uIiwic3RhdGVfYXJlYSIsImxvbmdfZGVzYyIsImRlc2NyaXB0aW9uIiwic2hvcnRfZGVzYyIsInN1YnN0cmluZyIsIm1ldGFfdGl0bGUiLCJtZXRhX2Rlc2NyaXB0aW9uIiwibWV0YV9rZXl3b3JkIiwiZGF0ZV9hZGRlZCIsIkRhdGUiLCJkYXRlX3VwZGF0ZWQiLCJzcGVjaWFsIiwicHJvZHVjdF9yZWxhdGVkX2lkIiwicHJvZml0IiwicmVzdWx0IiwiaW5zZXJ0SWQiLCJpbWFnZV91cmwiLCJsZW5ndGgiLCJpIiwiaW1hZ2VEYXRhIiwicHJvZHVjdF9pZCIsImRlZmF1bHQiLCJkYXRlX2NyZWF0ZWQiLCJzdWNjZXNzIiwiUFVUIiwidXBkYXRlcyIsInVuZGVmaW5lZCIsIk9iamVjdCIsImtleXMiLCJBcnJheSIsImlzQXJyYXkiLCJleGlzdGluZ0ltYWdlcyIsImFmZmVjdGVkUm93cyIsIkRFTEVURSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/billboards/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/cors.ts":
/*!*********************!*\
  !*** ./lib/cors.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withCors: () => (/* binding */ withCors)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nfunction parseOrigins() {\n    return (process.env.CORS_ORIGINS || \"\").split(\",\").map((s)=>s.trim()).filter(Boolean);\n}\nfunction withCors(req, res) {\n    const allowed = parseOrigins();\n    const origin = req.headers.get(\"origin\") || \"\";\n    // Always vary on Origin (important when behind caches/CDNs)\n    res.headers.set(\"Vary\", \"Origin\");\n    // If it's a browser request with an Origin, only allow if whitelisted\n    if (origin) {\n        if (!allowed.includes(origin)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Origin not allowed\"\n            }, {\n                status: 403\n            });\n        }\n        res.headers.set(\"Access-Control-Allow-Origin\", origin);\n    }\n    res.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n    res.headers.set(\"Access-Control-Allow-Methods\", \"GET,POST,PUT,PATCH,DELETE,OPTIONS\");\n    res.headers.set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    return res;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29ycy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUEyQztBQUUzQyxTQUFTQztJQUNQLE9BQU8sQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLElBQUksRUFBQyxFQUNsQ0MsS0FBSyxDQUFDLEtBQ05DLEdBQUcsQ0FBQyxDQUFDQyxJQUFNQSxFQUFFQyxJQUFJLElBQ2pCQyxNQUFNLENBQUNDO0FBQ1o7QUFFTyxTQUFTQyxTQUFTQyxHQUFZLEVBQUVDLEdBQWlCO0lBQ3RELE1BQU1DLFVBQVViO0lBQ2hCLE1BQU1jLFNBQVNILElBQUlJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGFBQWE7SUFFNUMsNERBQTREO0lBQzVESixJQUFJRyxPQUFPLENBQUNFLEdBQUcsQ0FBQyxRQUFRO0lBRXhCLHNFQUFzRTtJQUN0RSxJQUFJSCxRQUFRO1FBQ1YsSUFBSSxDQUFDRCxRQUFRSyxRQUFRLENBQUNKLFNBQVM7WUFDN0IsT0FBT2YscURBQVlBLENBQUNvQixJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBcUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzFFO1FBQ0FULElBQUlHLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLCtCQUErQkg7SUFDakQ7SUFFQUYsSUFBSUcsT0FBTyxDQUFDRSxHQUFHLENBQUMsb0NBQW9DO0lBQ3BETCxJQUFJRyxPQUFPLENBQUNFLEdBQUcsQ0FBQyxnQ0FBZ0M7SUFDaERMLElBQUlHLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLGdDQUFnQztJQUVoRCxPQUFPTDtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3V0ZG9vcnMtbmV4dGpzLWFwaS8uL2xpYi9jb3JzLnRzP2YyZDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcblxyXG5mdW5jdGlvbiBwYXJzZU9yaWdpbnMoKSB7XHJcbiAgcmV0dXJuIChwcm9jZXNzLmVudi5DT1JTX09SSUdJTlMgfHwgXCJcIilcclxuICAgIC5zcGxpdChcIixcIilcclxuICAgIC5tYXAoKHMpID0+IHMudHJpbSgpKVxyXG4gICAgLmZpbHRlcihCb29sZWFuKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhDb3JzKHJlcTogUmVxdWVzdCwgcmVzOiBOZXh0UmVzcG9uc2UpIHtcclxuICBjb25zdCBhbGxvd2VkID0gcGFyc2VPcmlnaW5zKCk7XHJcbiAgY29uc3Qgb3JpZ2luID0gcmVxLmhlYWRlcnMuZ2V0KFwib3JpZ2luXCIpIHx8IFwiXCI7XHJcblxyXG4gIC8vIEFsd2F5cyB2YXJ5IG9uIE9yaWdpbiAoaW1wb3J0YW50IHdoZW4gYmVoaW5kIGNhY2hlcy9DRE5zKVxyXG4gIHJlcy5oZWFkZXJzLnNldChcIlZhcnlcIiwgXCJPcmlnaW5cIik7XHJcblxyXG4gIC8vIElmIGl0J3MgYSBicm93c2VyIHJlcXVlc3Qgd2l0aCBhbiBPcmlnaW4sIG9ubHkgYWxsb3cgaWYgd2hpdGVsaXN0ZWRcclxuICBpZiAob3JpZ2luKSB7XHJcbiAgICBpZiAoIWFsbG93ZWQuaW5jbHVkZXMob3JpZ2luKSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJPcmlnaW4gbm90IGFsbG93ZWRcIiB9LCB7IHN0YXR1czogNDAzIH0pO1xyXG4gICAgfVxyXG4gICAgcmVzLmhlYWRlcnMuc2V0KFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luXCIsIG9yaWdpbik7XHJcbiAgfVxyXG5cclxuICByZXMuaGVhZGVycy5zZXQoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1DcmVkZW50aWFsc1wiLCBcInRydWVcIik7XHJcbiAgcmVzLmhlYWRlcnMuc2V0KFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLCBcIkdFVCxQT1NULFBVVCxQQVRDSCxERUxFVEUsT1BUSU9OU1wiKTtcclxuICByZXMuaGVhZGVycy5zZXQoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsIFwiQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uXCIpO1xyXG5cclxuICByZXR1cm4gcmVzO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwYXJzZU9yaWdpbnMiLCJwcm9jZXNzIiwiZW52IiwiQ09SU19PUklHSU5TIiwic3BsaXQiLCJtYXAiLCJzIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJ3aXRoQ29ycyIsInJlcSIsInJlcyIsImFsbG93ZWQiLCJvcmlnaW4iLCJoZWFkZXJzIiwiZ2V0Iiwic2V0IiwiaW5jbHVkZXMiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/cors.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n\nconst db = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASS,\n    database: process.env.DB_NAME,\n    port: process.env.DB_PORT ? Number(process.env.DB_PORT) : 3306,\n    connectionLimit: process.env.DB_POOL_LIMIT ? Number(process.env.DB_POOL_LIMIT) : 10\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBbUM7QUFFNUIsTUFBTUMsS0FBS0Qsc0RBQWdCLENBQUM7SUFDakNHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsT0FBTztJQUN6QkMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDRyxPQUFPO0lBQ3pCQyxVQUFVTCxRQUFRQyxHQUFHLENBQUNLLE9BQU87SUFDN0JDLFVBQVVQLFFBQVFDLEdBQUcsQ0FBQ08sT0FBTztJQUM3QkMsTUFBTVQsUUFBUUMsR0FBRyxDQUFDUyxPQUFPLEdBQUdDLE9BQU9YLFFBQVFDLEdBQUcsQ0FBQ1MsT0FBTyxJQUFJO0lBQzFERSxpQkFBaUJaLFFBQVFDLEdBQUcsQ0FBQ1ksYUFBYSxHQUFHRixPQUFPWCxRQUFRQyxHQUFHLENBQUNZLGFBQWEsSUFBSTtBQUNuRixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb3V0ZG9vcnMtbmV4dGpzLWFwaS8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBteXNxbCBmcm9tIFwibXlzcWwyL3Byb21pc2VcIjtcblxuZXhwb3J0IGNvbnN0IGRiID0gbXlzcWwuY3JlYXRlUG9vbCh7XG4gIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QsXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIsXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTLFxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSxcbiAgcG9ydDogcHJvY2Vzcy5lbnYuREJfUE9SVCA/IE51bWJlcihwcm9jZXNzLmVudi5EQl9QT1JUKSA6IDMzMDYsXG4gIGNvbm5lY3Rpb25MaW1pdDogcHJvY2Vzcy5lbnYuREJfUE9PTF9MSU1JVCA/IE51bWJlcihwcm9jZXNzLmVudi5EQl9QT09MX0xJTUlUKSA6IDEwLFxufSk7XG4iXSwibmFtZXMiOlsibXlzcWwiLCJkYiIsImNyZWF0ZVBvb2wiLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUiIsInBhc3N3b3JkIiwiREJfUEFTUyIsImRhdGFiYXNlIiwiREJfTkFNRSIsInBvcnQiLCJEQl9QT1JUIiwiTnVtYmVyIiwiY29ubmVjdGlvbkxpbWl0IiwiREJfUE9PTF9MSU1JVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/mysql2","vendor-chunks/aws-ssl-profiles","vendor-chunks/iconv-lite","vendor-chunks/next","vendor-chunks/long","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/named-placeholders","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fbillboards%2Froute&page=%2Fapi%2Fbillboards%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbillboards%2Froute.ts&appDir=C%3A%5CUsers%5CHP%5CDesktop%5Coutdoors-new-website%5Cbackend%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHP%5CDesktop%5Coutdoors-new-website%5Cbackend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();